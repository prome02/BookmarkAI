<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI智能书签管理器</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <h1>AI智能书签管理器</h1>
    
    <div class="section">
      <h2>AI设置</h2>
      <div class="form-group">
        <label for="aiApiType">AI API类型:</label>
        <select id="aiApiType" class="form-control">
          <option value="gemini">Google Gemini API</option>
          <option value="openai">OpenAI API</option>
          <option value="deepseek">DeepSeek API</option>
          <option value="custom">自定义模型</option>
        </select>
      </div>
      
      <div id="customModelSection" class="form-group" style="display: none;">
        <label for="customApiEndpoint">API端点:</label>
        <input type="text" id="customApiEndpoint" placeholder="请输入API端点URL">
      </div>
      
      <div class="form-group">
        <label for="apiKey">API Key:</label>
        <input type="password" id="apiKey" placeholder="请输入您的API Key">
        <button id="testApiBtn" class="btn small">测试连接</button>
      </div>
    </div>
    
    <div class="section">
      <h2>自动化设置</h2>
      <div class="form-group">
        <label for="scheduledScans">定期扫描:</label>
        <select id="scheduledScans">
          <option value="never">从不</option>
          <option value="daily">每天</option>
          <option value="weekly">每周</option>
          <option value="monthly">每月</option>
        </select>
      </div>
    </div>

    <div class="section">
      <h2>近期加入書籤</h2>
      <p class="section-description">顯示最近添加的書籤，快速訪問新收藏的內容</p>
      <div class="recent-bookmarks-controls">
        <label for="recentBookmarksLimit">顯示數量:</label>
        <select id="recentBookmarksLimit" class="limit-select">
          <option value="10" selected>10 筆</option>
          <option value="20">20 筆</option>
          <option value="30">30 筆</option>
          <option value="40">40 筆</option>
        </select>
        <button id="refreshRecentBookmarksBtn" class="btn primary">重新載入</button>
      </div>
      <div id="recentBookmarksList" class="recent-bookmarks-list">
        <div class="empty-placeholder">正在載入近期書籤...</div>
      </div>
    </div>

    <div id="invalid-links-section" class="section">
      <h2>无效链接管理</h2>
      <div class="invalid-links">
        <div class="table-header">
          <span class="link-title">标题</span>
          <span class="link-url">URL</span>
          <span class="link-status">状态</span>
          <span class="link-action">操作</span>
        </div>
        <div id="invalidLinksList" class="links-list">
          <!-- 无效链接列表将通过JS动态填充 -->
          <div class="empty-placeholder">尚未扫描无效链接</div>
        </div>
        <!-- 进度条容器 -->
        <div id="scanProgressContainer" class="progress-container" style="display: none;">
          <div class="progress-label">正在扫描: <span id="scanProgressText">0%</span></div>
          <div class="progress-bar-container">
            <div id="scanProgressBar" class="progress-bar"></div>
          </div>
        </div>
        <div class="actions">
          <button id="scanInvalidBtn" class="btn">扫描无效链接</button>
          <button id="findOldBookmarksBtn" class="btn primary">查找6個月前書籤</button>
          <button id="removeAllInvalidBtn" class="btn danger">删除所有无效链接</button>
        </div>
      </div>
    </div>

    <div id="old-bookmarks-section" class="section" style="display: none;">
      <h2>舊書籤管理</h2>
      <p class="section-description">以下書籤創建於6個月前，且最後訪問時間也超過6個月（或從未訪問）</p>
      <div class="old-bookmarks">
        <div class="table-header">
          <span class="link-title">標題</span>
          <span class="link-url">URL</span>
          <span class="link-date">創建日期</span>
          <span class="link-date">最後訪問</span>
          <span class="link-action">操作</span>
        </div>
        <div id="oldBookmarksList" class="links-list">
          <!-- 舊書籤列表將通過JS動態填充 -->
          <div class="empty-placeholder">尚未掃描舊書籤</div>
        </div>
        <div class="actions">
          <button id="removeAllOldBtn" class="btn danger">刪除所有舊書籤</button>
        </div>
      </div>
    </div>
    
    <div class="section">
      <h2>忽略域名管理</h2>
      <p class="section-description">以下域名在扫描无效链接时将被跳过：</p>
      <div class="ignored-domains">
        <div id="ignoredDomainsList" class="domains-list">
          <!-- 忽略域名列表将通过JS动态填充 -->
          <div class="empty-placeholder">没有设置忽略的域名</div>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>誤判數據分析</h2>
      <p class="section-description">系統收集您手動標記的誤判數據，用於分析和改善無效鏈接判斷算法</p>
      <div class="learning-stats">
        <div class="stat-item">
          <div class="stat-label">誤判記錄總數</div>
          <div class="stat-value" id="falsePositiveCount">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">已學習的有效域名</div>
          <div class="stat-value" id="learnedDomainsCount">0</div>
        </div>
      </div>

      <div class="analysis-section">
        <h3>誤判狀態碼分析</h3>
        <p class="section-description">統計被誤判的 HTTP 狀態碼，幫助改善判斷邏輯</p>
        <div id="statusCodeAnalysis" class="status-code-analysis">
          <!-- 狀態碼分析將通過JS動態填充 -->
          <div class="empty-placeholder">暫無數據</div>
        </div>
      </div>

      <div class="analysis-section">
        <h3>誤判域名統計（Top 10）</h3>
        <div id="domainAnalysis" class="domain-analysis">
          <!-- 域名分析將通過JS動態填充 -->
          <div class="empty-placeholder">暫無數據</div>
        </div>
      </div>

      <div id="learnedDomainsList" class="learned-domains-list">
        <!-- 學習的域名列表將通過JS動態填充 -->
      </div>

      <div class="actions">
        <button id="exportLearningDataBtn" class="btn primary">匯出分析數據</button>
        <button id="clearLearningDataBtn" class="btn danger">清除學習數據</button>
      </div>
    </div>
    
    <div id="duplicate-links-section" class="section">
      <h2>重复链接管理</h2>
      <div class="duplicate-links">
        <div class="duplicate-group-list" id="duplicateLinksList">
          <!-- 重复链接分组将通过JS动态填充 -->
          <div class="empty-placeholder">尚未扫描重复链接</div>
        </div>
        <div class="actions">
          <button id="scanDuplicateBtn" class="btn">扫描重复链接</button>
          <button id="removeAllDuplicatesBtn" class="btn danger">自动删除所有重复项</button>
        </div>
      </div>
    </div>
    
    <div id="ai-organize-section" class="section">
      <h2>AI整理结果</h2>
      <div class="ai-organize-results">
        <!-- 添加AI分析进度显示区域 -->
        <div id="aiAnalysisProgress" class="ai-analysis-progress" style="display: none;">
          <div class="progress-header">
            <div class="progress-title">AI分析进度</div>
            <div class="progress-status">处理中: <span id="currentStep">准备中</span></div>
          </div>
          <div class="progress-stages">
            <div class="stage" data-stage="collecting">
              <div class="stage-icon">📚</div>
              <div class="stage-label">收集书签</div>
              <div class="stage-status"></div>
            </div>
            <div class="stage-connector"></div>
            <div class="stage" data-stage="analyzing">
              <div class="stage-icon">🤖</div>
              <div class="stage-label">AI分析</div>
              <div class="stage-status"></div>
            </div>
            <div class="stage-connector"></div>
            <div class="stage" data-stage="organizing">
              <div class="stage-icon">📂</div>
              <div class="stage-label">生成建议</div>
              <div class="stage-status"></div>
            </div>
          </div>
          <div class="progress-details">
            <div class="progress-bar-container">
              <div id="aiProgressBar" class="progress-bar"></div>
            </div>
            <div id="progressDetails" class="progress-text">正在初始化...</div>
          </div>
        </div>
        
        <div class="table-header">
          <span class="link-title">书签名称</span>
          <span class="link-url">URL</span>
          <span class="link-category">AI建议分类</span>
          <span class="link-action">操作</span>
        </div>
        <div id="aiOrganizeList" class="links-list">
          <!-- AI整理结果将通过JS动态填充 -->
          <div class="empty-placeholder">尚未进行AI整理</div>
        </div>
        <div class="actions">
          <button id="startOrganizeBtn" class="btn primary">开始AI整理</button>
          <button id="applyAllBtn" class="btn" style="display: none;">应用所有建议</button>
        </div>
      </div>
    </div>
    
    
    <div class="section">
      <div class="actions">
        <button id="saveSettingsBtn" class="btn primary">保存设置</button>
        <div id="saveStatus" class="save-status"></div>
      </div>
    </div>
  </div>
  
  <script src="options.js"></script>
</body>
</html> 